<html>
<head>
<script src="https://cdn.jsdelivr.net/npm/axios@0.20.0/dist/axios.min.js"></script>
<script>
/*
const config = {
  headers: { 
          'Access-Control-Allow-Headers': 'x-access-token',
          'x-access-token' :'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7Im5hbWUiOiJub20iLCJwYXNzd29yZCI6Im15cGFzcyIsImVtYWlsIjoiamFlYW5icmQyOW5AZ21haWwuY29tIn0sImlhdCI6MTYwMzI4OTkxOSwiZXhwIjoxNjAzMjkwMjE5fQ.S7JuIYCZ-19JmENtgwV8EbOgQ9ej-q6ytop5T2ht5f8',
          'Authorization': `eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyIjp7Im5hbWUiOiJub20iLCJwYXNzd29yZCI6Im15cGFzcyIsImVtYWlsIjoiamFlYW5icmQyOW5AZ21haWwuY29tIn0sImlhdCI6MTYwMzI4OTkxOSwiZXhwIjoxNjAzMjkwMjE5fQ.S7JuIYCZ-19JmENtgwV8EbOgQ9ej-q6ytop5T2ht5f8`
        }
};
*/

const bodyParameters = {
   key: "yes"
};

var signup = function() {
  axios.post('/user/signup',{ name:"jam", password: "mypass", email: "dekkkppdx@gpoml.com"  })
           .then( (reponse) => { 
            console.log("token du signup=>",reponse.data) ;
            window.localStorage.setItem('token', reponse.data) ;
          })
}

var usord = function() {
  var TOKEN = localStorage.getItem('token');
  console.log("=>>",TOKEN)
  config = {
      headers: {
            'Access-Control-Allow-Headers': 'x-access-token', 
            'x-access-token' : TOKEN ,
            'Authorization': TOKEN 
          }
  }
  
  axios.get( 
      '/api/userOrders',
      Object.assign({},bodyParameters, config))
      .then(console.log)
      .catch(console.log);
} 


</script>
</head>
<body>
  <button onclick="signup()">signup</button>
  <button onclick="usord()">ordersusers</button>
</body>
</html>
